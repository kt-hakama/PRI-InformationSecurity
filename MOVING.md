# プロジェクトフォルダの移動時の注意点

Windows や iCloud Drive 上でビルドエラー（EINVAL / readlink など）が出る場合、プロジェクトを **iCloud Drive 外** や **ローカルディスク** に移動すると解消することがあります。

## 移動前の準備

### 1. 作業中のものを保存・終了する

- **Cursor / VS Code** などでプロジェクトを開いている場合は、**一度閉じる**
- **開発サーバー**（`npm run dev`）を動かしている場合は **停止**（Ctrl+C）
- 未保存のファイルがあれば **保存**

### 2. 移動するフォルダ

- **プロジェクトのルートフォルダ全体**（例: `RFtraining`）をそのまま移動する
- 中身をバラバラにせず、**1つのフォルダごと** 移動する

### 3. 移動しなくてよいもの（移動後に作り直せる）

次のフォルダは **移動しなくても**、移動先で作り直せます。  
容量を減らしたい場合は **移動前に削除** してから移動し、移動後に再度生成してください。

| フォルダ / ファイル | 説明 | 移動後の対応 |
|---------------------|------|----------------|
| **`node_modules`** | 依存パッケージ | 移動先で `npm install` を実行 |
| **`.next`** | ビルドキャッシュ | 移動先で `npm run build` で再生成 |
| **`out`** | 静的エクスポート出力 | 移動先で `npm run build` で再生成 |

**注意:** `node_modules` を削除して移動する場合は、移動先で **必ず `npm install`** を実行してください。

---

## 推奨する移動先（Windows）

- **`C:\Users\あなたのユーザー名\Documents\RFtraining`** など、**ローカルディスク（C:）のドキュメントなど**
- **`C:\dev\RFtraining`** のように、iCloud と関係ないフォルダ
- **OneDrive の同期フォルダ** も、同期の仕方によっては `.next` で同様の不具合が出ることがあるため、**同期外のフォルダ** の方が安全

---

## 移動の手順（推奨）

### 方法A: フォルダごとコピー（安全）

1. **`RFtraining` フォルダ全体** を、エクスプローラーでコピー（Ctrl+C）
2. 移動先（例: `C:\dev\`）に貼り付け（Ctrl+V）
3. 問題なければ、元の場所（iCloud Drive 内）のフォルダは **後から** 削除する

### 方法B: 軽くしてから移動（node_modules を渡さない）

1. 元のプロジェクトで **`node_modules`** と **`.next`** を削除
2. **`RFtraining` フォルダ** を移動先にコピーまたは移動
3. 移動先で **ターミナルを開き**、プロジェクトフォルダに移動してから:
   ```powershell
   npm install
   npm run build
   ```

---

## 移動後にすること

1. **Cursor などでフォルダを開き直す**  
   「ファイル → フォルダーを開く」で、**移動先の** `RFtraining` を指定する

2. **ターミナルで移動先に移動**
   ```powershell
   cd C:\dev\RFtraining
   ```
   （実際のパスに合わせて変更）

3. **`node_modules` を削除して移動した場合**
   ```powershell
   npm install
   ```

4. **ビルドの確認**
   ```powershell
   npm run build
   ```

5. **開発サーバーの確認**
   ```powershell
   npm run dev
   ```
   ブラウザで http://localhost:3000 が開けば問題ありません。

---

## 注意したい点

- **絶対パス** を書いている設定ファイルがなければ、**フォルダを移動するだけ** で動作は変わりません。このプロジェクトでは、パスは相対指定が中心なので、移動による影響は小さいです。
- **Git を使っている場合** は、移動後もそのまま `git status` や `git pull` が使えます。リポジトリの紐づきはフォルダ内の `.git` に含まれているためです。
- **ブックマークやショートカット** で元のパスを指定している場合は、移動先のパスに更新してください。
- 移動後も **同じ Node.js のバージョン** を使うようにしてください（`node --version` で確認）。

---

## まとめ

| 項目 | 内容 |
|------|------|
| 移動するもの | プロジェクトのルートフォルダ（`RFtraining`）全体 |
| 移動前に | エディタ・サーバーを終了し、必要なら `node_modules` と `.next` を削除 |
| 移動先 | iCloud / OneDrive の影響が少ないローカルフォルダ（例: `C:\dev\`） |
| 移動後 | `npm install`（削除した場合）、`npm run build`、`npm run dev` で動作確認 |

この手順で移動すれば、ビルドエラーを避けつつ、同じように開発・ビルドを続けられます。
