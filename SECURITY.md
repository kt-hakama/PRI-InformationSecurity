# セキュリティについて

Web に公開した際の情報改ざん防止および一般的なセキュリティ対策の状況です。

## 現在アプリで実施している対策

### 1. HTTP セキュリティヘッダー（next.config.js）

次のヘッダーを全ページに付与しています。

| ヘッダー | 内容 |
|----------|------|
| **X-Frame-Options: DENY** | 他サイトから iframe で埋め込むことを禁止し、クリックジャッキングを防止します。 |
| **X-Content-Type-Options: nosniff** | ブラウザによる MIME タイプの解釈変更を禁止し、意図しない実行・表示を防ぎます。 |
| **Referrer-Policy: strict-origin-when-cross-origin** | 参照元（Referer）の送信を制御し、機密が URL に含まれる場合の漏洩を抑えます。 |
| **Permissions-Policy** | カメラ・マイク・位置情報など不要な機能を無効化し、攻撃面を減らします。 |

### 2. アプリの性質とデータの扱い

- **シナリオなどのコンテンツ**はソースコード（`data/scenarios.ts` 等）に含まれており、ビルド時に静的ファイルにバンドルされます。
- **回答データ**はブラウザの `sessionStorage` のみに保存しており、サーバーへ送信していません。
- **認証・個人情報の入力**は行っていないため、パスワードや個人データの保存・送信はありません。

このため、「情報の改ざん」が起きる可能性があるのは主に次の場合です。

- **ホスティングやデプロイ環境が攻撃者に乗っ取られた場合**  
  → 配信されている HTML/JS が差し替えられるリスクがあります。
- **リポジトリやビルドパイプラインが不正に変更された場合**  
  → ビルド結果に悪意あるコードが含まれるリスクがあります。

## 公開時に推奨する対策

### 1. HTTPS で配信する

- 必ず **HTTPS** で配信し、HTTP は HTTPS にリダイレクトする設定にしてください。
- Vercel / Netlify / AWS など多くのホスティングでは、HTTPS と HTTP→HTTPS リダイレクトがデフォルトまたは簡単に有効化できます。
- HTTPS により、通信途中での改ざんや盗聴を抑えられます。

### 2. 信頼できるホスティングとデプロイ

- 信頼できるホスティングサービスを利用し、デプロイ用アカウントのパスワード・2要素認証を強くしてください。
- デプロイは、可能であれば Git の特定ブランチからのみ行い、本番用のビルド・デプロイ権限を限られた人に絞ると安全です。

### 3. リポジトリのアクセス管理

- ソースコードの改ざんを防ぐため、リポジトリへの書き込み権限を必要最小限にし、可能であればプルリクエスト＋レビューで変更を取り込んでください。
- 本番デプロイに直結するブランチは保護し、 force push を禁止する設定を推奨します。

### 4. 依存関係の管理

- `npm audit` で既知の脆弱性を定期的に確認し、問題があれば `npm update` やパッチ適用で対応してください。
- 本番デプロイ前にも `npm run build` が通ることと、必要に応じて `npm audit` を実行することを推奨します。

## さらに強化する場合

- **Content-Security-Policy (CSP)**  
  スクリプトやスタイルの読み込み元を制限することで、XSS や不正なリソース読み込みを抑えられます。Next.js ではインラインスクリプトを利用するため、導入時は動作確認が必要です。
- **監視**  
  デプロイ後のファイル改ざん検知や、異常なトラフィック検知のため、ホスティングや CDN のログ・アラートを利用する方法があります。

---

本アプリは学習・社内トレーニング用を想定した構成です。より厳しい要件（個人情報の取り扱い、法令対応など）がある場合は、セキュリティ担当者や専門家に相談してください。
